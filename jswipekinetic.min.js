/**
 * A jQuery plugin that enables you to add kinetic scrolling on your touch optimized projects.
 * jSwipeKinetic is build on top of jGestures (jgestues.codeplex.com).
 * Including: the elastic effect made famous by ios and the abillity to swipe or drag an element.
 * Copyright 2010, Neue Digitale / Razorfish GmbH
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Bugfixes and improvements appreciated.
 * @author martin.krause@razorfish.de
 * @version 1.0
 *
 * @requires
 * jQuery JavaScript Library v1.4.2 - http://jquery.com/
 *	Copyright 2010, John Resig
 *	Dual licensed under the MIT or GPL Version 2 licenses.
 *	http://jquery.org/license
 *
 * jGestures v0.87 - http://jgestures.codeplex.com
 *	Copyright 2010-2011, Razorfish GmbH
 *	Licensed under the Apache License, Version 2.0
 */
(function(c){c.fn.jSwipeKinetic=function(d){if(c.hasGestures===undefined){throw new Error("Missing jGestures")}var e=jQuery.extend({},c.fn.jSwipeKinetic._oDefaults,d);return this.each(function(i,j){var h=jQuery(this);var g=jQuery.meta?jQuery.extend({},e,h.data()):e;var l=h.find(g.sSelectorItems);var f=0;var k=0;l.each(function(){f+=jQuery(this).outerWidth(true);k=k>jQuery(this).outerHeight(true)?k:jQuery(this).outerHeight(true)});h.css("-webkit-translate3d","(0,0,0)");h.css({width:f+"px",height:k+"px",overflow:"hidden"});b(h)})};function b(d){d.bind("swipeone",c.fn.jSwipeKinetic.swipe).bind("swipemove",c.fn.jSwipeKinetic.swipeMove).bind("jGestures.touchstart",c.fn.jSwipeKinetic.touchstart).bind("jGestures.touchend;processed",c.fn.jSwipeKinetic.touchend)}function a(e,j,k){var g=1;var d=(parseInt(e.css("marginLeft"))+j.lastX);var i=(parseInt(e.css("marginTop"))+j.lastY);if(k===true){var h=-1*(e.width()-e.parent().width());if(d>0){d=0;g=0.25}if(d<h){d=h;g=0.25}var f=-1*(e.height()-e.parent().height());if(i>0){i=0;g=0.25}if(i<f){i=f;g=0.25}}return{iLeft:d,iTop:i,iDuration:g}}c.fn.jSwipeKinetic.swipe=function(f,d){var h=d.delta[0];var e=jQuery(f.target);e.get(0).addEventListener("webkitTransitionEnd",function(i){jQuery(i.target).data("jSwipeKinetic-hasRunningSwipe",false).css("-webkit-transition","");jQuery(document).data("jSwipeKinetic-preventScrolling",false)},false);if(f.timeStamp-e.data("jSwipeKinetic-timestampTouchsstart")>1500){return}var g=a(e,h,true);jQuery(document).data("jSwipeKinetic-preventScrolling",true);e.data("jSwipeKinetic-hasRunningSwipe",true).css("-webkit-transition",["margin ",g.iDuration,"s ease-out"].join("")).css({marginLeft:["",g.iLeft,"px"].join(""),marginTop:["",g.iTop,"px"].join("")})};c.fn.jSwipeKinetic.swipeMove=function(f,d){var h=d.delta[0];jQuery(document).data("jSwipeKinetic-preventScrolling",true);var e=jQuery(f.target);if(e.data("jSwipeKinetic-hasRunningSwipe")){return}var g=a(e,h,false);e.css({marginLeft:["",g.iLeft,"px"].join(""),marginTop:["",g.iTop,"px"].join("")})};c.fn.jSwipeKinetic.touchstart=function(e){var d=jQuery(e.target);d.data("jSwipeKinetic-timestampTouchsstart",e.timeStamp);if(d.data("jSwipeKinetic-hasRunningSwipe")){d.css("-webkit-transition","all 0s").css("marginLeft",["",parseInt(d.css("marginLeft")),"px"].join("")).data("jSwipeKinetic-hasRunningSwipe",false);jQuery(document).data("jSwipeKinetic-preventScrolling",false)}};c.fn.jSwipeKinetic.touchend=function(e){jQuery(document).data("jSwipeKinetic-preventScrolling",false);var d=jQuery(e.target);if(d.data("jSwipeKinetic-hasRunningSwipe")===false){var f=a(d,{lastX:0,lastY:0},true);jQuery(document).data("jSwipeKinetic-preventScrolling",true);d.data("jSwipeKinetic-hasRunningSwipe",true).css("-webkit-transition",["margin ",(f.iDuration===1)?0:f.iDuration,"s ease-out"].join("")).css({marginLeft:["",f.iLeft,"px"].join(""),marginTop:["",f.iTop,"px"].join("")})}};c.fn.jSwipeKinetic.__version=1.25;c.fn.jSwipeKinetic.__class="jSwipeKinetic"})(jQuery);


